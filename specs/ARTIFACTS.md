# Artifacts

| Artifact | Location | Producer | Consumer | Format / Notes | Example Instance |
| --- | --- | --- | --- | --- | --- |
| Product Requirements Document | `docs/PRD.md` | Manual requirements capture (MediaHub vision). | Plan-mode + rebuild prompts, AI planning skills. | Markdown sections (Executive Summary, Personas, Core Use Cases, Functional/Non-Functional Requirements, Constraints, Risks). | `docs/PRD.md` itself. |
| Domain-Driven Design input | **NOT FOUND** | n/a | The closest existing artifact is `docs/ENGINEERING_DESIGN_SPEC.md` (System Context, Domain Model, Data Model, API contract). | DDD input doc is not present; use `docs/ENGINEERING_DESIGN_SPEC.md` as canonical outline. | n/a (gap). |
| Domain model code | `api/src/main/java/com/picturemodel/domain/` | Turn 2/domain code edit (agents). | Services (`api/src/main/java/com/picturemodel/service/`), repositories, DTOs, database schema (`db/schema.sql`). | Java entities, enums, repositories with `@Enumerated` columnDefinition, `UUID` PK snippets. | `RemoteFileDrive.java`, `Image.java`, `Tag.java`, `CrawlJob.java`. |
| Database schema | `db/schema.sql` | `.claude/skills/sql` invocation (see header). | PostgreSQL/H2 initialization, docs, developers. | SQL DDL for six tables, CHECK constraints mirroring enums, indexes, FK order. | `db/schema.sql`. |
| JSON API schemas | `docs/schemas/*.json` | Manual/agentic codex editing (Turn 23 referenced). | Frontend typings (`ui/src/types/api.ts`), backend DTOs, documentation. | 25 JSON Schema files covering requests/responses/Enums/WS events (e.g., `common-enum-drive-type.json`). | `docs/schemas/api-response-image-details.json`. |
| Tech stack reference | `docs/tech-stack.md` | Design doc synthesizing choices. | Plan-mode prompt, shell operator instructions, README-style onboarding. | Markdown tables listing Next.js, Spring Boot, React Query, STOMP, etc. | The `Frontend > Core Framework` table. |
| Rebuild plan | `docs/rebuild-guide.md` | Turn summary of 8-turn rebuild, created during reverse engineering. | Execution workflow for each turn (scaffolding, domain, services, API, UI, e2e). | Markdown sections per turn, validation checklists, gotcha table, session start template. | `Turn 1 â€” Project Scaffolding` section with hard constraints. |
| Plan-mode driver decisions | `docs/plan-mode-driver.md` | Pre-made decisions (full-stack pattern, turn contexts, hard constraints). | Plan-mode prompts, `docs/rebuild` checklists, AI script referencing. | Markdown sections covering Pre-Made Architectural Decisions, Turn Planning Contexts, Validation rules. | `Turn 2 Planning Context` constraints for enums. |
| UI file map | `ui/docs/file-map.md` | Manual summary of UI directory structure. | New developers recreating `ui/src`; references in automation. | Tables mapping paths to purposes (layout, pages, components). | Entries for `src/app/page.tsx`, `src/components/MainLayout.tsx`. |
| API controllers & DTOs | `api/src/main/java/com/picturemodel/api/` | Turn 4 API layer work. | Frontend (REST + WebSocket consumers), e2e HTTP tests, documentation. | Controllers (Drive/Image/File/Tag/Crawler/System), DTOs correspond to JSON schemas. | `DriveController.java`, `CrawlJobDto.java`. |
| Async services & configs | `api/src/main/java/com/picturemodel/service/` and `/config/` | Turn 3 service layer work + Turn 3 configs. | Controllers, scheduled tasks, WebSocket event emitters. | Services (CrawlerService, ThumbnailService, VideoMetadataExtractorService, etc.) and configs (Async, Cors, Jackson, Jasypt, Jpa, WebSocket). | `CrawlerService.java`, `AsyncConfig.java`. |
| FileSystem providers | `api/src/main/java/com/picturemodel/infrastructure/filesystem/` | Turn 2 domain/infrastructure work. | `CrawlerService`, `FileController` streaming, credential encryption. | Interface + Local/SMB/SFTP/FTP implementations plus factory. | `FileSystemProviderFactory.java`. |
| Task manifests | `ai/agentic-pipeline/turns/*/manifest.json` | Agentic pipeline logging each turn. | Governance, traceability, turn replays. | JSON listing `turnId`, `tasks`, `validations`, `provenance`, outputs. | `ai/agentic-pipeline/turns/turn-24/manifest.json`. |
| Session context snapshot | `ai/agentic-pipeline/turns/*/session_context.md` | Skill-driven context capture for each turn. | Planning verification, memory/state persistence. | Markdown table with variables, loaded contexts, execution plan. | `ai/agentic-pipeline/turns/turn-24/session_context.md`. |
| Pull request summaries | `ai/agentic-pipeline/turns/*/pull_request.md` | Agentic pipeline output describing work items. | Human reviewers, PR generation, documentation. | Markdown sections with summary, files created, schema coverage. | `ai/agentic-pipeline/turns/turn-24/pull_request.md`. |
| ADRs | `ai/agentic-pipeline/turns/*/adr.md` | Architectural decision records. | Historical justification, future reference. | Markdown ADR describing rejected options and chosen path (e.g., Vidstack decision). | `ai/agentic-pipeline/turns/turn-29/adr.md`. |
| Turn index | `ai/agentic-pipeline/turns_index.csv` | Automated log of turn order. | Reporting, regression tracing. | CSV with `turnId`, task name, timestamps, branch/PR info. | `ai/agentic-pipeline/turns_index.csv`. |
| E2E HTTP tests | `e2e/*.http` | Hand-authored test suites (drive, crawler, files, tags). | Regression/QC, manual execution via HTTP client. | `.http` files with `@baseUrl = http://localhost:8080` and chained requests. | `e2e/drive-create.http` suite. |
| Build helpers | `Makefile`, `start-backend.sh`, `test-video-detection.sh` | Human/agent authors. | Dev workflow, verification loops. | `Makefile` targets, shell scripts for building, running, and smoke testing. | `start-backend.sh`. |
